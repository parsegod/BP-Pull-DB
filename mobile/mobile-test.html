<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Blu Base | Mobile</title>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Open+Sans:wght@400;600&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style2.css" />
  <link rel="icon" type="image/png" href="https://files.catbox.moe/pucbmh.png">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">

  <link rel="preload" href="https://files.catbox.moe/pucbmh.png" as="image">
  <link rel="preload" href="assets/wallpaper.mp4" as="video" type="video/mp4">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="Blu Base" />
  <meta property="og:description" content="your no.1 bp pull db!" />
  <meta property="og:image" content="https://files.catbox.moe/pucbmh.png" />
  <meta property="og:url" content="https://parsegod.github.io/BP-Pull-DB/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Blu Base" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Blu Base">
  <meta name="twitter:description" content="your no.1 bp pull db!">
  <meta name="twitter:image" content="https://files.catbox.moe/pucbmh.png">
  <script>
    function handleRedirect() {
        const mobileBreakpoint = 768; 
        
        const isMobileSize = window.innerWidth < mobileBreakpoint;
        const isMobilePage = window.location.href.includes('/mobile');
        const isDesktopPage = window.location.href.includes('/home');

        if (!isMobileSize && !isDesktopPage) {
            window.location.href = '/home';
        }
        if (isMobileSize && !isMobilePage) {
            window.location.href = '/mobile';
        }
    }

    window.onload = handleRedirect;
    
    window.addEventListener('resize', handleRedirect);
  </script>
  <script src="/_vercel/insights/script.js"></script>

  <style>
/*
 * Updated Stylesheet
 * This stylesheet now includes the new centering style for the Discord modal.
 */

/* ================== General Styles & Scrollbar Hiding ================== */

/* Hide scrollbar for Chrome, Safari and Opera */
::-webkit-scrollbar {
  width: 0px;
  height: 0px;
  background: transparent;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: transparent;
}

/* Hide scrollbar for Firefox */
html {
  scrollbar-width: none;
}

body {
  background-color: #0B1738;
  margin: 0;
  overflow: hidden;
}

/* ================== Loading Screen & Animations ================== */

#loadingScreen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: transparent;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  color: #D0D8E8;
  font-family: 'Open Sans', sans-serif;
  font-size: 1.2em;
  opacity: 1;
  visibility: visible;
  transition: opacity 1s ease-out, visibility 1s ease-out;
  overflow: hidden;
}

.loading-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 25px;
  width: calc(95% - 20px);
  max-width: 855px;
  box-sizing: border-box;
  background: rgba(11, 23, 56, 0.95);
  border-radius: 30px 30px 0 0;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(44, 72, 124, 0.6);
  position: relative;
  overflow: hidden;
  animation: popIn 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
  margin: auto;
}

@keyframes popIn {
  from { transform: scale(0.5); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

#loadingLogo {
  display: block;
  width: clamp(100px, 30vw, 180px);
  height: auto;
  margin-bottom: 3vh;
  opacity: 0;
  transform: translateY(-20px);
  animation: fadeInSlideUp 1.2s ease-out forwards 0.5s;
}

@keyframes fadeInSlideUp {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}

.motto-loading {
  font-family: 'Dancing Script', cursive;
  font-size: clamp(1em, 5vw, 1.8em);
  background: linear-gradient(to right, rgb(31, 190, 190), #0B1738);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  font-weight: bold;
  text-shadow: 0 0 8px rgba(31, 190, 190), 0 0 15px rgba(11, 23, 56, 0.7);
  margin-top: 1vh;
  margin-bottom: 4vh;
  white-space: nowrap;
  text-align: center;
}

#loadingBarContainer {
  width: 100%;
  height: 2.5vh;
  background-color: #1A2B4D;
  border-radius: 1.25vh;
  overflow: hidden;
  margin-top: 2vh;
  box-shadow: inset 0 0 8px rgba(0,0,0,0.4);
  border: 1px solid rgba(44, 72, 124, 0.6);
}

#loadingBar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #7CA0E0 0%, #4A8CD4 100%);
  border-radius: 1.25vh;
  transition: width 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  box-shadow: 0 0 10px rgba(124, 160, 224, 0.7);
}

#loadingText {
  margin-top: 3vh;
  font-weight: 700;
  font-family: 'Oswald', sans-serif;
  font-size: clamp(1rem, 4vw, 1.5rem);
  text-shadow: 0 2px 5px rgba(0,0,0,0.5);
  color: #E0E8F0;
  animation: pulseText 1.8s infinite alternate;
  letter-spacing: 1px;
  text-transform: uppercase;
  text-align: center;
}

@keyframes pulseText {
  from { transform: scale(1); opacity: 1; }
  to { transform: scale(1.03); opacity: 0.95; }
}

#loadingAssetText {
  font-size: clamp(0.7rem, 2.8vw, 1rem);
  margin-top: 1.5vh;
  text-align: center;
  line-height: 1.6;
  min-height: 3.5em;
  color: #BCC7D8;
  text-shadow: 0 1px 3px rgba(0,0,0,0.3);
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
}

.bold-green-percentage {
  color: #00FF00;
  font-weight: bold;
}

/* ================== Main Content & Video Background ================== */

#mainContent {
  display: none;
  opacity: 0;
  transition: opacity 1s ease-in-out;
}

.video-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  z-index: -1;
  opacity: 1;
  visibility: visible;
  transition: opacity 1s ease-in-out;
}

.video-background video {
  min-width: 100%;
  min-height: 100%;
  width: auto;
  height: auto;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  object-fit: cover;
  filter: brightness(0.6);
}

/* ================== Announcement Banner & Container ================== */

.announcement-banner {
  background: rgba(11, 23, 56, 0.7);
  color: #ffffff;
  text-align: center;
  padding: 10px 0;
  font-family: 'Oswald', sans-serif;
  font-size: 1.1em;
  font-weight: bold;
  letter-spacing: 0.5px;
  position: relative;
  z-index: 1000;
}

.announcement-banner p {
  margin: 0;
}

.gradient-heart {
  background: linear-gradient(to right, #059695, #0B1738);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  font-size: 1.2em;
  display: inline-block;
  line-height: 1;
  vertical-align: middle;
}

.announcement-banner a {
  color: #059695;
  text-decoration: none;
  transition: color 0.2s ease;
}

.announcement-banner a:hover {
  color: #059695;
  font-weight: bold;
}

.container {
  width: calc(100% - 20px);
  max-width: 900px;
  min-width: 320px;
  margin: 20px auto 20px auto;
  padding: 25px;
  background: rgba(11, 23, 56, 0.95);
  border-radius: 30px 30px 0 0;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(44, 72, 124, 0.6);
  position: relative;
  z-index: 2;
  zoom: 0.85;
  min-height: calc(100vh - 40px);
  padding-top: 250px;
}

.motto {
  position: absolute;
  top: 180px;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(to right, rgb(31, 190, 190), #0B1738);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  font-family: 'Dancing Script', cursive;
  font-size: 1.8em;
  text-align: center;
  white-space: normal;
  z-index: 10;
  width: 100%;
  font-weight: bold;
  text-shadow: 0 0 8px rgba(31, 190, 190), 0 0 15px rgba(11, 23, 56, 0.7);
}

.logo {
  position: absolute;
  top: 30px;
  left: 50%;
  transform: translateX(-50%);
  width: 180px;
  height: auto;
  z-index: 10;
}

.red-announcement {
  color: red !important;
  font-weight: bold;
  margin-top: 10px;
}

/* ================== Bug Log Button ================== */

.bug-log-button-positioned {
  position: absolute;
  top: 25px;
  right: 25px;
  z-index: 10;
  width: 40px;
  height: 40px;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 50%;
  background: none;
  border: 2px solid #2C487C;
  color: #D0D8E8;
  box-shadow: none;
}

.bug-log-button-positioned:hover {
  background: none;
  transform: translateY(0);
  box-shadow: none;
  border-color: #7CA0E0;
  color: #D0D8E8;
  text-decoration: none;
}

.bug-log-button-positioned svg {
  width: 24px;
  height: 24px;
  stroke: currentColor;
  fill: none;
}

#search {
  font-size: 16px;
}

/* ================== Modal Styles ================== */

#clearStorageModal .modal-content,
#discordAnnouncementModal .modal-content {
  padding: 78px;
  border-radius: 12px;
  background: rgba(11, 23, 56, 0.85);
  border-top-left-radius: 30px;
  border-top-right-radius: 30px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(44, 72, 124, 0.6);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  height: 100%;
}

#clearStorageModal .modal-content h2,
#discordAnnouncementModal .modal-content h2 {
  text-align: center;
  font-family: 'Oswald', sans-serif;
  background: linear-gradient(to right, rgb(31, 190, 190), #0B1738);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  text-shadow: 0 0 8px rgba(31, 190, 190), 0 0 15px rgba(11, 23, 56, 0.7);
  letter-spacing: 1px;
  font-size: 2em;
  margin-top: 0;
  margin-bottom: 20px;
  text-transform: uppercase;
  font-weight: bold;
}

#clearStorageModal .modal-content p,
#discordAnnouncementModal .modal-content p {
  text-align: center;
  color: #CCE0F0;
  font-size: 0.95em;
  margin-top: 15px;
  margin-bottom: 25px;
  font-weight: bold;
}

#clearStorageModal .modal-buttons,
#discordAnnouncementModal .modal-buttons {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 20px;
}

#clearStorageModal .modal-buttons button,
#discordAnnouncementModal .modal-buttons button {
  padding: 8px 15px;
  font-size: 0.85em;
  border-radius: 6px;
  max-width: 200px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-weight: bold;
}

.small-dark-red-glowing-text {
  font-size: 0.75em;
  color: #CC0000;
  text-shadow: 0 0 5px rgba(204, 0, 0, 0.7);
  font-weight: bold;
  margin-bottom: 5px;
}

.glowing-green-text {
  color: #00FF00;
  text-shadow: 0 0 8px rgba(0, 255, 0, 0.7);
  font-size: 0.95em;
  font-weight: bold;
}

#changelogModal .modal-content h2 {
  text-align: center;
  font-family: 'Oswald', sans-serif;
  background: linear-gradient(to right, rgb(31, 190, 190), #0B1738);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  text-shadow: 0 0 8px rgba(31, 190, 190), 0 0 15px rgba(11, 23, 56, 0.7);
  letter-spacing: 1px;
  font-size: 2em;
  margin-top: 0;
  margin-bottom: 20px;
  text-transform: uppercase;
  font-weight: bold;
}

#howToUseModal .modal-content h2 {
  text-align: center;
  font-family: 'Oswald', sans-serif;
  background: linear-gradient(to right, rgb(31, 190, 190), #0B1738);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  text-shadow: 0 0 8px rgba(31, 190, 190), 0 0 15px rgba(11, 23, 56, 0.7);
  letter-spacing: 1px;
  font-size: 2em;
  margin-top: 0;
  margin-bottom: 20px;
  text-transform: uppercase;
  font-weight: bold;
}

/* New style for the discord modal to match the how-to-use modal */
.discord-modal-content {
  background-color: transparent !important;
  box-shadow: none !important;
  border: none !important;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  width: 100%;
  padding: 20px;
  position: absolute; /* Added for centering */
  top: 50%; /* Added for centering */
  left: 50%; /* Added for centering */
  transform: translate(-50%, -50%); /* Added for centering */
}

/* ================== Discord Embed Styles (Basic Visibility) ================== */

.discord-embed-container {
  display: flex;
  justify-content: center;
  margin: 20px auto;
  max-width: 95%;
  border: 1px dashed red; /* For debugging */
  margin-top: 20%; /* Moved the entire card down by 20% */
}

.discord-embed-card {
  background-color: rgba(44, 72, 124, 0.6);
  border-radius: 12px;
  width: 100%;
  max-width: 400px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
  border: 1px solid rgba(74, 140, 212, 0.5);
  padding: 16px;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.discord-embed-banner {
  height: 80px;
  width: 100%;
  background: radial-gradient(105.43% 127.05% at 50.1% 127.05%, rgb(31, 190, 190) 20.65%, #0B1738 85.16%);
  border-radius: 12px 12px 0 0; /* Match top corners of the card */
  margin: -16px -16px 16px -16px; /* Align to the edges of the card */
}

.discord-embed-avatar-container {
  background-color: #0B1738;
  border-radius: 50%;
  padding: 5px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  border: 3px solid rgba(44, 72, 124, 0.8);
  z-index: 2;
  margin-top: -50px; /* Pulls the avatar up */
}

.discord-embed-guild-icon {
  width: 70px;
  height: 70px;
  border-radius: 50%;
  display: block;
  object-fit: cover;
}

.discord-embed-header {
  text-align: center;
  color: #E0E8F0;
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 15px;
  width: 100%;
}

.discord-embed-guild-name {
  font-family: 'Oswald', sans-serif;
  font-size: 1.5rem;
  font-weight: bold;
  color: #7CA0E0;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
  margin: 0;
  line-height: 1.2;
}

.discord-embed-info-and-actions {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;
  width: 100%;
}

.discord-embed-member-counts {
  display: flex;
  gap: 20px;
  justify-content: center;
  flex-wrap: wrap;
}

.discord-embed-member-online,
.discord-embed-member-total {
  display: flex;
  align-items: center;
  font-size: 1rem;
  color: #BCC7D8;
  font-weight: 500;
}

#goToDiscordEmbedBtn {
  background: linear-gradient(90deg, #7CA0E0 0%, #4A8CD4 100%);
  color: #FFFFFF;
  border: none;
  padding: 12px 25px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1.1rem;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  transition: all 0.3s ease;
  width: 100%;
  max-width: 250px;
  margin: 5px 0;
}

#goToDiscordEmbedBtn:hover {
  box-shadow: 0 0 15px rgba(124, 160, 224, 0.9);
  transform: translateY(-2px);
}

.discord-embed-dot-online {
  width: 10px;
  height: 10px;
  background-color: #00FF00;
  border-radius: 50%;
  margin-right: 8px;
  box-shadow: 0 0 5px rgba(0, 255, 0, 0.7);
}

.discord-embed-dot-total {
  width: 10px;
  height: 10px;
  background-color: #BCC7D8;
  border-radius: 50%;
  margin-right: 8px;
}

.discord-embed-buttons {
  display: flex;
  flex-direction: column;
  gap: 12px;
  width: 100%;
  max-width: 250px;
  margin: 15px auto 0;
}
.padded-paragraph {
  padding-bottom: 20px; /* Adjust the value as needed */
}
/* ================== Media Queries (Consolidated) ================== */

@media (max-width: 768px) {
  #loadingScreen {
    justify-content: center;
    padding-top: 0;
  }
  .loading-content {
    width: 96%;
    max-width: none;
    padding: 10px;
    margin: auto;
    min-height: 40vh;
    border-radius: 25px 25px 0 0;
    position: static;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    zoom: 1;
  }
  #loadingLogo {
    position: static;
    margin-bottom: 3vh;
    width: clamp(80px, 25vw, 150px);
    top: auto;
    left: auto;
    transform: none;
    opacity: 1;
    animation: none;
  }
  .motto-loading {
    position: static;
    font-size: clamp(0.9em, 4vw, 1.5em);
    margin-top: 1vh;
    margin-bottom: 4vh;
    white-space: nowrap;
    top: auto;
    left: auto;
    transform: none;
  }
  #loadingBarContainer {
    height: 2vh;
    margin-top: 2vh;
  }
  #loadingText {
    margin-top: 3vh;
    font-size: clamp(1rem, 4vw, 1.4rem);
  }
  #loadingAssetText {
    min-height: 3.5em;
    font-size: clamp(0.7rem, 2.8vw, 1rem);
    margin-top: 1.5vh;
  }
  .container {
    width: 96%;
    padding: 10px;
    padding-top: 180px;
    margin: 10px auto;
    zoom: 1;
    border-radius: 25px 25px 0 0;
  }
  .logo {
    width: 120px;
    top: 15px;
    transform: translateX(-50%);
  }
  .motto {
    font-size: 1.2em;
    top: 120px;
    white-space: normal;
  }
}

@media (min-width: 768px) {
  .discord-embed-header {
    flex-direction: row;
    padding: 20px;
    justify-content: space-between;
    align-items: center;
  }
  .discord-embed-info-and-actions {
    flex-direction: row;
    justify-content: flex-end;
    align-items: center;
    gap: 20px;
  }
}


@media (max-width: 480px) {
  #loadingScreen {
    justify-content: center;
    padding-top: 0;
  }
  .loading-content {
    width: 96%;
    max-width: none;
    padding: 10px;
    margin: auto;
    min-height: 40vh;
    border-radius: 20px 20px 0 0;
    position: static;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    zoom: 1;
  }
  #loadingLogo {
    position: static;
    margin-bottom: 2vh;
    width: clamp(70px, 20vw, 120px);
    top: auto;
    left: auto;
    transform: none;
    opacity: 1;
    animation: none;
  }
  .motto-loading {
    position: static;
    font-size: clamp(0.8em, 3.5vw, 1.2em);
    margin-top: 1vh;
    margin-bottom: 2.5vh;
    white-space: nowrap;
    top: auto;
    left: auto;
    transform: none;
  }
  #loadingBarContainer {
    height: 1.8vh;
    margin-top: 2vh;
  }
  #loadingText {
    margin-top: 2vh;
    font-size: clamp(1rem, 4vw, 1.3rem);
  }
  #loadingAssetText {
    min-height: 2em;
    font-size: clamp(0.6rem, 2.5vw, 0.9rem);
    margin-top: 1.5vh;
  }
  .container {
    width: 96%;
    padding: 10px;
    padding-top: 180px;
    margin: 10px auto;
    zoom: 1;
    border-radius: 20px 20px 0 0;
  }
  .logo {
    width: 120px;
    top: 15px;
    transform: translateX(-50%);
  }
  .motto {
    font-size: 1.2em;
    top: 120px;
    white-space: normal;
  }
  .discord-embed-card {
    max-width: 280px;
    padding: 10px; /* Adjusted padding for smaller screens */
  }
  .discord-embed-avatar-container {
    top: 25px;
    left: 10px;
    padding: 3px;
  }
  .discord-embed-guild-icon {
    width: 50px;
    height: 50px;
  }
  .discord-embed-header {
    padding-top: 20px;
    flex-direction: column; /* Stack elements vertically on small screens */
    align-items: center; /* Center items horizontally */
    text-align: center; /* Center text */
  }
  .discord-embed-guild-name {
    font-size: 1.1em;
    margin-bottom: 5px; /* Adjusted margin */
  }
  .discord-embed-member-counts {
    flex-direction: column; /* Stack member counts vertically */
    gap: 5px; /* Reduced gap */
    margin-top: 5px; /* Adjusted margin */
  }
  .discord-embed-member-online,
  .discord-embed-member-total {
    font-size: 0.8em;
    justify-content: center; /* Center the text and dot */
  }
  #goToDiscordEmbedBtn {
    padding: 8px 15px;
    font-size: 0.9em;
  }
}

/* iPhone 12 specific fine-tuning */
@media only screen 
  and (device-width: 390px) 
  and (device-height: 844px) 
  and (-webkit-device-pixel-ratio: 3) {
    .discord-embed-avatar-container {
      width: 45px;
      height: 45px;
      top: 35px;
    }
    .discord-embed-guild-icon {
      width: 39px;
      height: 39px;
    }
}
  </style>
  <script>

    const blacklistedIPsEncoded = [
      ""
    ];

    function decodeBase64(encodedString) {
        try {
            return atob(encodedString);
        } catch (e) {
            console.error("Base64 decoding error:", e);
            return "";
        }
    }

    async function getUserIP() {
        try {
            const response = await fetch('https://api.ipify.org?format=json');
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            return data.ip;
        } catch (error) {
            console.error("Error fetching IP address:", error);
            return null;
        }
    }

    function isIPBlacklisted(ip) {
        return blacklistedIPsEncoded.some(encodedIp => decodeBase64(encodedIp) === ip);
    }

    function checkAPIKeyAndRedirect(isInitialCheck) {
        const apiKey = localStorage.getItem('blubase_api_key');
        const apiKeyExpiry = localStorage.getItem('blubase_api_key_expiry');
        const originalApiKey = localStorage.getItem('blubase_api_key_original');
        const currentTime = new Date().getTime();

        const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;

        const isCorrupted = !apiKey || !uuidRegex.test(apiKey) || (originalApiKey && apiKey !== originalApiKey);
        const isExpired = !apiKeyExpiry || isNaN(parseInt(apiKeyExpiry)) || currentTime >= parseInt(apiKeyExpiry);

        const loadingScreen = document.getElementById('loadingScreen');
        const mainContent = document.getElementById('mainContent');

        if (isCorrupted || isExpired) {
            console.log("Index.html: API key corrupted or expired. Clearing local storage.");
            localStorage.removeItem('blubase_api_key');
            localStorage.removeItem('blubase_api_key_expiry');
            localStorage.removeItem('blubase_api_key_original');

            if (isInitialCheck) {
                console.log("Index.html: Initial load, API key corrupted/expired. Redirecting to /verify.");
                window.location.replace('/verify');
            } else {
                console.log("Index.html: API key corrupted/expired during runtime. Redirecting to endkey.html.");
                window.location.replace('endkey.html');
            }
        } else {
            console.log("Index.html: Valid and untampered API key found. Displaying content.");

            if (loadingScreen) {
                loadingScreen.style.opacity = '0';
                loadingScreen.style.visibility = 'hidden';
            }

            if (mainContent) {
                mainContent.style.display = 'block';

                setTimeout(() => {
                    mainContent.style.opacity = '1';
                }, 10);
            }
        }
    }

    (async () => {
        const userIP = await getUserIP();
        console.log("Index.html: User IP detected:", userIP);

        if (userIP && isIPBlacklisted(userIP)) {
            console.warn("Index.html: Blacklisted IP detected. Redirecting to blocked.html.");
            localStorage.removeItem('blubase_api_key');
            localStorage.removeItem('blubase_api_key_expiry');
            localStorage.removeItem('blubase_api_key_original');
            window.location.replace('/blocked');
            return;
        } else if (userIP) {
            console.log("Index.html: User IP not blacklisted.");
        } else {
            console.warn("Index.html: Could not get user IP. Proceeding without blacklist check.");
        }

        document.addEventListener('DOMContentLoaded', () => {
            checkAPIKeyAndRedirect(true);
        });

        window.addEventListener('storage', (event) => {
            console.log("Index.html: Storage event detected for key:", event.key);

            if (event.key === 'blubase_api_key' || event.key === 'blubase_api_key_expiry' || event.key === 'blubase_api_key_original') {
                checkAPIKeyAndRedirect(false);
            }
        });

        window.addEventListener('focus', () => {
            console.log("Index.html: Window focus detected. Re-checking API key status.");
            checkAPIKeyAndRedirect(false);
        });

    })();
  </script>
</head>
<body>
  <div class="video-background">
    <video id="backgroundVideo" autoplay loop muted playsinline>
      <source src="assets/wallpaper.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>

  <div id="loadingScreen">
    <div class="loading-content">
      <div id="loadingBarContainer">
        <div id="loadingBar"></div>
      </div>
      <div id="loadingText">LOADING ASSETS: <span class="bold-green-percentage">0%</span></div>
      <div id="loadingAssetText">Initializing.</div>
    </div>
  </div>

  <div id="mainContent">
    <div class="announcement-banner">
      <p><span class="gradient-heart">üñ§</span> you can now join our discord By <a href="#" id="discordAnnouncementLink">CLICKING HERE </a>!</p>
    </div>

    <div class="container">
      <img src="https://files.catbox.moe/pucbmh.png" alt="Logo" class="logo">
      <h1 class="motto">your no.1 bp pull db</h1>

      <button id="bugLogButton" class="changelog-button bug-log-button-positioned">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Icons" viewBox="0 0 32 32" xml:space="preserve">
          <style type="text/css">

            .st0{fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
          </style>
          <path class="st0" d="M29,15h-5.1c-0.1-1.2-0.5-2.4-1-3.5c1.9-1.5,3.1-3.7,3.1-6.1V5c0-0.6-0.4-1-1-1s-1,0.4-1,1v0.4c0,1.8-0.8,3.4-2.2,4.5 C19.5,8.8,18.8,8.2,18.1,7.7c0-0.1,0-0.1,0-0.2c0-2.2-1.8-4-4-4s-4,1.8-4,4c0,0.1,0,0.1,0,0.2c-0.7,0.5-1.3,1-1.9,1.7 C8.8,8.8,8,7.2,8,5.4V5c0-0.6-0.4-1-1-1S6,4.4,6,5v0.4c0,2.4,1.1,4.7,3.1,6.1c-0.5,1-0.9,2.2-1,3.5H3c-0.6,0-1,0.4-1,1s0.4,1,1,1 h5.1c0.1,1.2,0.5,2.4,1,3.5C7.1,21.9,6,24.2,6,26.6V27c0,0.6,0.4,1,1,1s1-0.4,1-1v-0.4c0-1.8,0.8-3.4,2.2-4.5 c1.5,1.8,3.5,2.9,5.8,2.9s4.4-1.1,5.8-2.9c1.4,1.1,2.2,2.7,2.2,4.5V27c0,0.6,0.4,1,1,1s1-0.4,1-1v-0.4c0-2.4-1.1-4.7-3.1-6.1 c0.5-1,0.9-2.2,1-3.5H29c0.6,0,1-0.4,1-1S29.6,15,29,15z"></path>
        </svg>
      </button>

      <div class="search-filter-section">
        <div class="contributions-button-container">
            <button id="contributionsButton" class="changelog-button" onclick="window.location.href='/HOH'">HOH</button>
        </div>
        <div id="searchView"> <div class="search-bar-row">

          <input type="search" id="search" placeholder="      ..." />

            <div class="filter-dropdown">
              <button id="toggleCategoryDropdown" type="button">
                Filter Category <span id="categoryArrow">‚ñº</span>
              </button>
              <div id="categoryCheckboxes" class="dropdown-panel hidden"></div>
            </div>

            <div class="filter-dropdown">
               <button id="togglePoolDropdown" type="button">
                 Filter Pool <span id="poolArrow">‚ñº</span>
               </button>
               <div id="poolCheckboxes" class="dropdown-panel hidden"></div>
            </div>

            <div class="filter-dropdown">
              <button id="toggleStatusDropdown" type="button">
                Filter Status <span id="statusArrow">‚ñº</span>
              </button>
              <div id="statusCheckboxes" class="dropdown-panel hidden"></div>
            </div>
          </div>
        </div>

<div class="checkbox-controls">
  <label for="imageCheckbox">
    <input type="checkbox" id="imageCheckbox" name="imageCheckbox" value="">
    Show All Previews
  </label>
  <button id="changelogButton" class="changelog-button">View Changelog</button>
  <button id="howToUseButton" class="changelog-button">How To Use</button>
  <button id="clearStorageButton" class="changelog-button">Clear Local Storage</button>
  <button id="discordButton" class="changelog-button" onclick="window.open('https://discord.com/oauth2/authorize?client_id=1397393308086440040&scope=bot&permissions=24', '_blank')">Add Our Discord Bot</button>
</div>

        <div class="blueprint-counters">
          <p>TOTAL Blueprints Displayed: <span id="totalBlueprints">0</span></p>
          <p>RELEASED Blueprints: <span id="normalBlueprints">0</span></p>
          <p>UNRELEASED Blueprints: <span id="unreleasedBlueprints">0</span></p>
          <p>NOTHING Blueprints: <span id="nothingBlueprints">0</span></p>
        </div>
      </div> <table id="pullsTable">
        <thead>
          <tr>
            <th data-key="Weapon">Weapon</th>
            <th data-key="Category">Category</th>
            <th data-key="Blueprint">Blueprint</th>
            <th data-key="Pool">Pool</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="changelogModal" class="modal-overlay hidden">
      <div class="modal-content">
        <button class="modal-close-button" id="closeChangelogModal">&times;</button>
        <h2>Changelog</h2>
        <div id="changelogContent" class="changelog-entries">
          </div>
      </div>
    </div>

    <div id="howToUseModal" class="modal-overlay hidden">
      <div class="modal-content">
        <button class="modal-close-button" id="closeHowToUseModal">&times;</button>
        <h2>How To Use</h2>
        <div id="howToUseContent" class="how-to-sections">
          <div class="how-to-tabs">
            <button class="tab-button active" data-tab="explanation">Explanation</button>
            <button class="tab-button" data-tab="zombies">Zombies</button>
            <button class="tab-button" data-tab="multiplayer">MP/WZ</button>
          </div>

          <div id="explanation-content" class="tab-content active">
            <ul>
              <li>
            <h3>Exploit Explanation</h3>
                <p>This method utilizes the way the game organizes weapon blueprints within its files, specifically in designated ùó£oolùòÄ. The method of adding weapon blueprints to the game also involves these pools. What this means is that if you possess any blueprint from a corresponding pool, you can use it to pull another blueprint from that very same pool. We have undertaken the extensive process of entering the game, gathering, and sorting all of these pools based on this blueprint pulling mechanism. Our objective is to meticulously document all blueprints and their corresponding pools. This effort aims to assist the community in efficiently pulling the specific blueprint they are looking for.</p>
                <p>If you're still unsure how our system works, let's walk through an example. We'll use the ùóñ9 "ùóßùóõùóò ùóîùóúùó°ùóßùóßùó¢ùó•ùó†" variant, which is stored in ùó£ool ùü≠ùü±. Assuming you're familiar with the pulling exploit,here's how it would work: You'd transfer the C9 to your alternate account. Then, on your main account, you'd pick any blueprint that's also stored in ùóπ ùü≠ùü± (i.e ùóß?ùó¢ .22 "ùóôùóúùó¶ùó¶ùóúùó¢ùó°") and perform the pull exploit. You should then successfully pull the ùóñ9 "ùóßùóõùóò ùóîùóúùó°ùóßùó¶ùóßùó¢ùó•ùó†".</p>
              </li>
            </ul>
          </div>

          <div id="zombies-content" class="tab-content hidden">
          <ul>
            <li>
            <h3>Zombies Exploit </h3>
                <p>If you‚Äôre still unsure about how this exploit works or how to perform the pulling process, don‚Äôt worry ‚Äî it will become clearer as you follow along.</p>
                <p>First, it‚Äôs important to know that this exploit only works on PS5 and Xbox Series X/S, last-gen consoles and PC players do not have access to split-screen, so this won‚Äôt work for you. Also, Player 2 doesn‚Äôt need a leveled-up account, but having one makes the pulls easier. If Player 2 uses a fresh account, you may need to perform an extra glitch to equip locked weapons in your Zombies loadout.</p>
                <p>Now, here‚Äôs how it works: start by launching Call of Duty and go into Zombies mode. Connect a second controller and sign in with your secondary profile. Set up Player 2‚Äôs loadout with the weapon you want to pull prints for (like the LADRA).
                Then back out to the screen where you can edit your main loadouts‚Äîthat will affect Controller 1‚Äôs loadouts. On your main account, equip the blueprint you want to use to pull the print. After that, back out to the main menu where you can select Multiplayer, Zombies, or Campaign.
                With Controller 2, select Zombies mode. Finally, go back to Player 1‚Äôs main loadout, and you should see the print you were trying to pull, as long as you‚Äôve followed everything correctly.</p>
          </li>
          </ul>
          </div>

          <div id="multiplayer-content" class="tab-content hidden">
            <ul>
              <li>
                <h3>Setup Build Method</h3>
                <p><strong>Working Universally through MP and WZ</strong></p>
                <p>1. <strong>Make a Setup Gun</strong> (base of the gun you want to pull)<br>
                   (create new -> delete build -> add att [Same As Receiver slots] -> name build Setup)</p>
                <p>2. <strong>Find A Print</strong> you own <strong>in the same pool as</strong> the print you wanna pull, create new build and then fill the same att slots as the Receiver.<br>
                   (Optional: Rename to Receiver)</p>
                <p>3. <strong>Equip the Receiver</strong> and then equip the Unowned Camo<br>
                   (If you are using DB then this is the same just DB shotgun with only DB)<br>
                   {RECOMMENDED: DUPE THE UNOWNED CAMO TO PREVENT WIPING!}</p>
                <p>4. <strong>Kill yourself</strong> and then requip that Build (setup)</p>
                <p>5. Finally equip the unowned camo again to save it<br>
                   (or just equip a att 2x on build)</p>
                <p class="red-announcement">PLEASE KEEP IN MIND IF YOU ARE IN A BROKEN STATE THEN IN ORDER TO SAVE BLUEPRINTS YOU MUST DELETE ANY BUILD AND THEN SAVE IT (THE SAME WAY THE CAMO SWAP SAVE WORKS)</p>
                <ul>
                  <li>keep it noted that prints are pulled in half's and currently there is not a way the pull the full prints in one method</li>
                  <li>if you wish to get the full print you must find the right Receiver attachment combo that pulls the full print (likely hood 1/20 roughly)</li>
                  <li>but it doesn't matter just throw a nice camo on and you'll be set!</li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="bugLogModal" class="modal-overlay hidden">
      <div class="modal-content">
        <button class="modal-close-button" id="closeBugLogModal">&times;</button>
        <h2>Bug Log</h2>
        <div id="bugLogContent" class="changelog-entries">

        </div>
      </div>
    </div>

    <div id="clearStorageModal" class="modal-overlay hidden">
      <div class="modal-content">
        <button class="modal-close-button" id="closeClearStorageModal">&times;</button>
        <h2>Clear Local Storage</h2>
        <p class="small-dark-red-glowing-text">thank you for using blunet.wtf made by parse
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-left: 5px;">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
            </svg>
        </p>
        <p class="glowing-green-text">if you clear your LocalStorage items you will have to reverify your IP. Do you wish to continue?</p>
        <div class="modal-buttons">
          <button id="confirmClearStorageBtn" class="changelog-button">Yes, Clear</button>
          <button id="cancelClearStorageBtn" class="changelog-button">No, Cancel</button>
        </div>
      </div>
    </div>

    <!-- New Discord Announcement Modal -->
    <div id="discordAnnouncementModal" class="modal-overlay hidden">
      <div class="modal-content">
        <button class="modal-close-button" id="closeDiscordAnnouncementModal">&times;</button>
<p class="padded-paragraph">Join our community for latest updates on the site, discussions about glitches, and fast support.</p>
        <!-- The discord-embed-container has been removed to make the modal the same size as others -->
        <div class="discord-embed-card">
          <div class="discord-embed-avatar-container">
            <img id="discord-server-icon" alt="Discord Server Icon" class="discord-embed-guild-icon" src="https://files.catbox.moe/pucbmh.png">
          </div>
          <div class="discord-embed-header">
            <h3 id="discord-guild-name" class="discord-embed-guild-name">      Loading...</h3>
            <!-- The member counts are now directly in the header -->
            <div class="discord-embed-member-counts">
              <div class="discord-embed-member-online">
                <div class="discord-embed-dot-online"></div>
                <div id="discord-online-count" class="discord-embed-text">0 Online</div>
              </div>
              <div class="discord-embed-member-total">
                <div class="discord-embed-dot-total"></div>
                <div id="discord-total-members" class="discord-embed-text">0 Members</div>
              </div>
            </div>
          </div>
        </div>
        <!-- The buttons have been moved outside the embed card -->
        <div class="discord-embed-buttons">
          <button id="goToDiscordEmbedBtn" class="changelog-button">Go to Server</button>
          <button id="cancelDiscordModalBtn" class="changelog-button">No Thanks</button>
        </div>
      </div>
    </div>

  </div>

  <script src="load.js"></script>
  <script src="script2.js"></script>
  <script>
    window.addEventListener('load', () => {

      if (window.va && typeof window.va.track === 'function') {

      } else {

      }

      const searchInput = document.getElementById('search');
      let storedValue = '';

      if (searchInput) {

        searchInput.addEventListener('blur', function() {
          storedValue = this.value;
        });

        searchInput.addEventListener('focus', function() {
          this.value = storedValue;
        });
      }

      document.getElementById('confirmClearStorageBtn').addEventListener('click', () => {
        localStorage.removeItem('blubase_api_key');
        localStorage.removeItem('blubase_api_key_expiry');
        localStorage.removeItem('blubase_api_key_original');

        document.cookie = 'blubase_verified=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';

        document.getElementById('clearStorageModal').classList.add('hidden');

        setTimeout(() => {
          window.location.replace('/endkey');
        }, 2000);
      });

      // Event listener for the "Go to Server" button inside the Discord embed
      document.getElementById('goToDiscordEmbedBtn').addEventListener('click', () => {
        window.open('https://discord.gg/7mfEwgUT8H', '_blank');
      });

      // New script for fetching Discord server data
      const discordGuildId = '1406333070239465572'; // NOTE: You need to replace this with the actual guild ID from the invite link
      const discordInviteCode = '7mfEwgUT8H';

      async function fetchDiscordData() {
        try {
          const response = await fetch(`https://discord.com/api/v9/invites/${discordInviteCode}?with_counts=true`);
          if (!response.ok) {
            throw new Error('Failed to fetch Discord data');
          }
          const data = await response.json();
          
          const guildNameElement = document.getElementById('discord-guild-name');
          const onlineCountElement = document.getElementById('discord-online-count');
          const totalMembersElement = document.getElementById('discord-total-members');
          const serverIconElement = document.getElementById('discord-server-icon');
          const serverBannerElement = document.getElementById('discord-server-banner'); // Get the new banner element
          
          if (data.guild) {
            guildNameElement.textContent = data.guild.name;
            onlineCountElement.textContent = `${data.approximate_presence_count} Online`;
            totalMembersElement.textContent = `${data.approximate_member_count} Members`;
            if (data.guild.icon) {
                const iconUrl = `https://cdn.discordapp.com/icons/${data.guild.id}/${data.guild.icon}.png`;
                serverIconElement.src = iconUrl;
            }
            // Check for and set the server banner
            if (data.guild.banner) {
                const bannerUrl = `https://cdn.discordapp.com/banners/${data.guild.id}/${data.guild.banner}.png?size=1024`;
                serverBannerElement.style.backgroundImage = `url(${bannerUrl})`;
            }
          }
        } catch (error) {
          console.error('Error fetching Discord data:', error);
          // Set to a fallback state if the API call fails
          const guildNameElement = document.getElementById('discord-guild-name');
          const onlineCountElement = document.getElementById('discord-online-count');
          const totalMembersElement = document.getElementById('discord-total-members');
          guildNameElement.textContent = 'Blu Base Community';
          onlineCountElement.textContent = '0 Online';
          totalMembersElement.textContent = '0 Members';
        }
      }

      fetchDiscordData();

    });
  </script>
</body>
</html>
